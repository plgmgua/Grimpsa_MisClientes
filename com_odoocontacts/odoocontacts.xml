<?xml version="1.0" encoding="utf-8"?>
<extension type="component" version="5.0" method="upgrade">
    <name>COM_ODOOCONTACTS</name>
    <author>Grimpsa</author>
    <creationDate>2025-01-27</creationDate>
    <copyright>Copyright (C) 2025 Grimpsa. All rights reserved.</copyright>
    <license>GNU General Public License version 2 or later</license>
    <authorEmail>admin@grimpsa.com</authorEmail>
    <authorUrl>https://grimpsa.com</authorUrl>
    <version>1.2.5-STABLE</version>
    <description>COM_ODOOCONTACTS_XML_DESCRIPTION</description>

    <scriptfile>admin/script.php</scriptfile>

    <namespace path="src">Grimpsa\Component\OdooContacts</namespace>

    <files folder="site">
        <folder>src</folder>
        <folder>tmpl</folder>
        <folder>language</folder>
        <folder>forms</folder>
    </files>

    <media destination="com_odoocontacts" folder="media">
        <folder>css</folder>
        <folder>js</folder>
    </media>

    <administration>
        <menu img="class:contact">COM_ODOOCONTACTS</menu>
        <files folder="admin">
            <filename>services/provider.php</filename>
            <filename>config.xml</filename>
            <filename>script.php</filename>
            <folder>forms</folder>
            <folder>src</folder>
            <folder>tmpl</folder>
            <folder>language</folder>
        </files>
    </administration>

    <config>
        <fields name="params">
            <fieldset name="component" label="COM_ODOOCONTACTS_CONFIG_COMPONENT_LABEL">
                <field
                    name="odoo_url"
                    type="text"
                    label="COM_ODOOCONTACTS_CONFIG_ODOO_URL_LABEL"
                    description="COM_ODOOCONTACTS_CONFIG_ODOO_URL_DESC"
                    default="https://grupoimpre.odoo.com/xmlrpc/2/object"
                    required="true"
                />
                <field
                    name="odoo_database"
                    type="text"
                    label="COM_ODOOCONTACTS_CONFIG_ODOO_DATABASE_LABEL"
                    description="COM_ODOOCONTACTS_CONFIG_ODOO_DATABASE_DESC"
                    default="grupoimpre"
                    required="true"
                />
                <field
                    name="odoo_user_id"
                    type="text"
                    label="COM_ODOOCONTACTS_CONFIG_ODOO_USER_ID_LABEL"
                    description="COM_ODOOCONTACTS_CONFIG_ODOO_USER_ID_DESC"
                    default="2"
                    required="true"
                />
                <field
                    name="odoo_api_key"
                    type="password"
                    label="COM_ODOOCONTACTS_CONFIG_ODOO_API_KEY_LABEL"
                    description="COM_ODOOCONTACTS_CONFIG_ODOO_API_KEY_DESC"
                    default="2386bb5ae66c7fd9022feaf82148680c4cf4ce3b"
                    required="true"
                />
                <field
                    name="contacts_per_page"
                    type="number"
                    label="COM_ODOOCONTACTS_CONFIG_CONTACTS_PER_PAGE_LABEL"
                    description="COM_ODOOCONTACTS_CONFIG_CONTACTS_PER_PAGE_DESC"
                    default="20"
                    min="5"
                    max="100"
                />
                <field
                    name="enable_debug"
                    type="radio"
                    label="COM_ODOOCONTACTS_CONFIG_ENABLE_DEBUG_LABEL"
                    description="COM_ODOOCONTACTS_CONFIG_ENABLE_DEBUG_DESC"
                    default="0"
                    class="btn-group btn-group-yesno"
                >
                    <option value="1">JYES</option>
                    <option value="0">JNO</option>
                </field>
                <field
                    name="ot_destination_url"
                    type="text"
                    label="COM_ODOOCONTACTS_CONFIG_OT_DESTINATION_URL_LABEL"
                    description="COM_ODOOCONTACTS_CONFIG_OT_DESTINATION_URL_DESC"
                    default="https://grimpsa_webserver.grantsolutions.cc/index.php/orden-de-trabajo"
                    required="false"
                />
            </fieldset>
        </fields>
    </config>

    <updateservers>
        <server type="extension" priority="1" name="Odoo Contacts Updates">
            <![CDATA[https://grimpsa.com/updates/com_odoocontacts.xml]]>
        </server>
    </updateservers>
</extension>